{% extends 'home/base_home.html' %} {% load staticfiles %} {% block content %}
{% load wagtailcore_tags register_tags %}


<style xmlns="http://www.w3.org/1999/html">
  A.class1 {color:red;}
A.class1:link  {text-decoration: underline; color: red;}
</style>
            <div class="row justify-content-md-center">
                    <div class="col-xl-12 col-md-12 col-sm-12">
                        <div class = "panel-default" style="width:100%">
                           <div class="card" style="padding: 5px;margin-top:50px;background-color:#333;">
                               <label style="text-align:justify;"><b style="font-size:16px;text-align:center;color:White;"><h4 style="line-height:.8em;padding-top:10px;">Search Project</h4></b></label>
                           </div>
                        </div>
                        <div class="card" style="padding: 10px;">
                            <div class="container">
                                {% priv_projs %}
                            </div>
                       </div>
                    </div>
                </div>



   <div class="card" style="padding: auto ">
     <div class="container" style="padding:10px;position: relative">
      <div class="card" style="border: 2px solid #C3C3C3;">
        <div class="collapse show" id="collapseExample">
            <form id="streamform" action="{% url 'stream_response' %}" method="POST">
                  {% csrf_token %}
                  <input type="text" name="projectName" id="projectName" class="form-control" value = "{{projectName}}" placeholder="Desired projectName" >

                <div class="col-lg-4 col-md-5 form-group">
                    <label for="community_type"> Community Partner Types
                        {% for data_definition in data_definition %}
                            {% if data_definition.id == 33%}
                            {% endif %}
                        {% endfor %}
                    </label>
                    <select id="communityPartner" name="communityPartner" CompValue=" ">
                        {% for name in community_filter.form.community_partner %}
                        <option id = "{{name}}"> </option>
                        {% endfor %}
                    </select>
                </div>

                 <div class="col-lg-4 col-md-5 form-group">
                    <label for="campus_partner"> Campus Partners
                    {% for data_definition in data_definition %}
                        {% if data_definition.id == 1%}
                        {% endif %}
                    {% endfor %}
                    </label>
                    <select id="campuspartner" name="campusPartner" CampValue=" ">
                        {% for campus in campus_filter.form.campus_partner %}
                        <option  id = "{{campus}}"> </option>
                        {% endfor %}
                    </select>
                </div>
                    <div class="col-lg-4 col-md-5 form-group">
                    <label for="academic_year"> From Academic Years
                        {% for data_definition in data_definition %}
                            {% if data_definition.id == 32%}
                            {% endif %}
                        {% endfor %}
                    </label>
                    <select id="academicYear" name="academicYear" YearValue=" ">
                        {% for sem in projects.form.academic_year %}
                        <option id = "{{sem}}"> </option>
                        {% endfor %}
                    </select>
                </div>


                  <input class="btn btn btn-secondary btn-md" type="submit"  value="search" id="streambutton"  />
                </form>
            </div>

        </div>
      </div>
         <div style="float: left;" id="node1-id" style="margin-left: 20%"></div>

         <div style="float: left;" id="button-id" style="margin-left: 0%"></div>
         <div>
            <div class="panel-body">&emsp;
                <div class="justify-content-md-center" id="node-id" style="margin-left: 2%; margin-right: 2%"></div>
            </div>
     </div>
   </div>

             <div style="margin-top:15px;">
                  <table id="example" class="table table-bordered table-striped dt-responsive overflow-wrap:break-word" style="width:100%">
                   <thead>
                         <tr id="tablerow">
                          <th>Academic Year
                           {% for data_definition in data_definition %}
                             {% if data_definition.id == 30%}
                                <span tabindex="-1" data-toggle="popover" data-trigger="focus"
                                  data-content="{{ data_definition.description }}" class="float" >
                                        <i class="fa fa-info-circle fa-align-top" aria-hidden="true"></i></span>
                             {% endif %}
                           {% endfor%}
                          </th>
                          <th>Projects
                           {% for data_definition in data_definition %}
                              {% if data_definition.id == 30%}
                                <span tabindex="-1" data-toggle="popover" data-trigger="focus"
                                  data-content="{{ data_definition.description }}" class="float" >
                                        <i class="fa fa-info-circle fa-align-top" aria-hidden="true"></i></span>
                              {% endif %}
                           {% endfor%}
                           </th>
                           <th>Community Partners
                            {% for data_definition in data_definition %}
                               {% if data_definition.id == 2%}
                                <span tabindex="-1" data-toggle="popover" data-trigger="focus"
                                      data-content="{{ data_definition.description }}" class="float" >
                                        <i class="fa fa-info-circle fa-align-top" aria-hidden="true"></i></span>
                               {% endif %}
                            {% endfor %}

                            </th>
                            <th>Campus Partners
                             {% for data_definition in data_definition %}
                                {% if data_definition.id == 1%}
                                  <span tabindex="-1" data-toggle="popover" data-trigger="focus"
                                      data-content="{{ data_definition.description }}" class="float" >
                                        <i class="fa fa-info-circle fa-align-top" aria-hidden="true"></i></span>
                                {% endif %}
                             {% endfor %}

                             </th>

                          </tr>
                     </thead>
<div container>
<tbody>
{% for project in data_list %}
                      <tr id="tablerows">
                       <td>{{project.academicYear}}</td>
                       <td>{{project.projectName}}</td>
                          <td>{{ project.communityPartner }} </td>
                          <td>{{ project.campusPartner }}</td>
                          </tr>

{% endfor %}
</tbody>
</div>
 </table>
                 </div>
<!--{% for project in data_list %}-->




  {% if flagBit == 1 %}

  <script>

               document.getElementById('node1-id').innerHTML =

                            '<br>' +
                            '<tr><td><a class="btn btn btn-secondary btn-md" href="/allProjects/" role="button" data-toggle="tooltip" title="Click on this button to  access a list of all Community Engagement Projects"><i class="fa fa-tasks" aria-hidden="true"></i>' +
                            ' All Projects</a></td></tr>'



   </script>
  {% endif %}

  {% if flagBit == 2 %}
<script>

        document.getElementById('node1-id').innerHTML =
                            '<br>' +
                            '<tr><td><a class="btn btn btn-secondary btn-md" href="/allProjects/" role="button" data-toggle="tooltip" title="Click on this button to  access a list of all Community Engagement Projects"><i class="fa fa-tasks" aria-hidden="true"></i>' +
                            ' All Projects</a></td></tr>'





        var projectName = $('#projectName').val();
        document.getElementById('button-id').innerHTML =
                            '<br>' +
                            '<tr><td><a class="btn btn btn-secondary btn-md" id="lnk-create_project"  role="button" data-toggle="tooltip" title="Click on this button to create a New Project"><i class="fa fa-plus-circle" aria-hidden="true"></i>' +
                            'Create Project</a></td></tr>'
                            document.getElementById("lnk-create_project").setAttribute("href","/createProject?p_name=" + projectName);
  </script>
  {% endif %}


{% if flagBit == 0 %}
   <script>


        var projectName = $('#projectName').val();
        document.getElementById('button-id').innerHTML =
                            '<br>' +
                            '<tr><td><a class="btn btn btn-secondary btn-md" id="lnk-create_project" role="button" data-toggle="tooltip" title="Click on this button to create a New Project"><i class="fa fa-plus-circle" aria-hidden="true"></i>' +
                            'Create Project</a></td></tr>'
                            document.getElementById("lnk-create_project").setAttribute("href","/createProject?p_name=" + projectName);



   </script>
  {% endif %}








<!--{% endfor %}-->

   <!--<script>-->

    <!--var valueFilter = document.getElementById("projectName");-->
    <!--//Press the listening button-->
    <!--valueFilter.addEventListener("keydown", function (e) {-->
    <!--if (e.keyCode == 8) {-->
        <!--document.getElementById('node-id'). innerHTML = "";-->
        <!--document.getElementById('node1-id'). innerHTML = "";-->
        <!--document.getElementById('button-id'). innerHTML = "";-->
    <!--}-->
<!--});-->

  <!--document.getElementById("streambutton").addEventListener("click", function (e)-->
  <!--{-->
    <!--var value = document.getElementById("projectName").value;-->
    <!--if ((value == ""))-->
    <!--{-->
        <!--document.getElementById('node-id'). innerHTML = "";-->
        <!--document.getElementById('node1-id'). innerHTML = "";-->
        <!--document.getElementById('button-id'). innerHTML = "";-->
    <!--}-->
    <!--alert(bit);-->
    <!--if(bit == 1)-->
    <!--{-->
        <!--alert("I will not print the button");-->
    <!--}-->
    <!--else if(!((value == "")))-->
    <!--{-->
       <!--var table = document.getElementById("example");-->
       <!--&lt;!&ndash;alert(table);&ndash;&gt;-->

       <!--&lt;!&ndash;alert(document.getElementById("example").rows[0].cells.item(2).innerHTML);&ndash;&gt;-->
       <!--var tablerows = document.getElementById("tablerows");-->
       <!--&lt;!&ndash;alert(tablerows);&ndash;&gt;-->
       <!--displayAddProjectFlag = 2;-->

       <!--var rowLength = table.rows.length;-->

       <!--for(var i=1; i< rowLength; i++)-->
       <!--{-->
         <!--var oCells = table.rows.item(i).cells;-->

         <!--var cellLength = oCells.length;-->

           <!--for(var j = 1; j< cellLength; j++)-->
           <!--{-->
                <!--var cellVal = oCells.item(j).innerHTML;-->

           <!--}-->
           <!--alert(oCells.item(1).innerHTML);-->

           <!--if(oCells.item(1).innerHTML == value)-->
           <!--{-->
            <!--&lt;!&ndash;alert("Ochina");&ndash;&gt;-->
            <!--displayAddProjectFlag = 1;-->
           <!--}-->
           <!--else-->
           <!--{-->
            <!--&lt;!&ndash;alert("raleeee");&ndash;&gt;-->
            <!--displayAddProjectFlag = 0;-->
           <!--}-->
           <!--if(displayAddProjectFlag == 1)-->
           <!--{-->
             <!--&lt;!&ndash;alert("jjjjjjjj");&ndash;&gt;-->
             <!--document.getElementById('node1-id').innerHTML =-->
                            <!--'<br>' +-->
                            <!--'<tr><td><a class="btn btn btn-secondary btn-md" href="/allProjects/" role="button" data-toggle="tooltip" title="Click on this button to  access a list of all Community Engagement Projects"><i class="fa fa-tasks" aria-hidden="true"></i>' +-->
                            <!--' All Projects</a></td></tr>'-->
            <!--}-->

            <!--if(displayAddProjectFlag == 0)-->
            <!--{-->
               <!--&lt;!&ndash;alert("I am here")&ndash;&gt;-->

                        <!--document.getElementById('button-id').innerHTML =-->
                            <!--'<br>' +-->

                            <!--'<tr><td><a class="btn btn btn-secondary btn-md" id="lnk-create_project"  role="button" data-toggle="tooltip" title="Click on this button to create a New Project"><i class="fa fa-plus-circle" aria-hidden="true"></i>' +-->
                            <!--'Create Project</a></td></tr>'-->

            <!--}-->
       <!--if(displayAddProjectFlag == 2)-->
         <!--{-->
             <!--&lt;!&ndash;alert("I am here tooooo")&ndash;&gt;-->

                        <!--document.getElementById('button-id').innerHTML =-->
                            <!--'<br>' +-->

                            <!--'<tr><td><a class="btn btn btn-secondary btn-md" id="lnk-create_project"  role="button" data-toggle="tooltip" title="Click on this button to create a New Project"><i class="fa fa-plus-circle" aria-hidden="true"></i>' +-->
                            <!--'Create Project</a></td></tr>'-->
         <!--}-->

       <!--}-->
    <!--}-->

  <!--});-->
<!--</script>-->
<script>
 function checking()
    {
        if(($("#projectName").val() === ''))
        {
            alert("Please enter what you are searching for to proceed.");
            return false
        }
    }
</script>
{% endblock %}




        {% block selectizeForm %}
        <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.5/js/select2.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.5/css/select2.min.css">
<script>
$(document).ready(function(){
    $('#projectName').attr({placeholder: 'Project Name',width: '225px'});
    $('#communityPartner').select2({placeholder: 'All Community Partner Types',width: '225px'});
    $('#academicYear').select2({placeholder: 'All Academic Years',width: '225px'});
    $('#campuspartner').select2({placeholder: 'All Campus Partners',width: '225px'});

    });
// submit when enter-Parimita
$("#projectName").keyup(function(event){
      if(event.keyCode== 13){
        $("#Search").click();
        }
    });
// added for submit by Naresh
$('#projectName').addClass('clearable');
               function tog(v){return v?'addClass':'removeClass';}
$(document).on('input', '.clearable', function(){
    $(this)[tog(this.value)]('x');
}).on('mousemove', '.x', function( e ){
    $(this)[tog(this.offsetWidth-18 < e.clientX-this.getBoundingClientRect().left)]('onX');
}).on('touchstart click', '.onX', function( ev ){
    ev.preventDefault();
    $(this).removeClass('x onX').val('').change();
});
</script>
        {% endblock %}
        {% block js %}
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.18/af-2.3.2/b-1.5.4/b-colvis-1.5.4/b-html5-1.5.4/b-print-1.5.4/cr-1.5.0/fc-3.2.5/r-2.2.2/rg-1.1.0/rr-1.2.4/sl-1.2.6/datatables.min.css"/>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.18/af-2.3.2/b-1.5.4/b-colvis-1.5.4/b-html5-1.5.4/b-print-1.5.4/cr-1.5.0/fc-3.2.5/r-2.2.2/rg-1.1.0/rr-1.2.4/sl-1.2.6/datatables.min.js"></script>
        <script type="text/javascript">
               $(document).ready(function() {
               $('#example_filter').find('input').addClass('clearable');
                           function tog(v){return v?'addClass':'removeClass';}
            $(document).on('input', '.clearable', function(){
                $(this)[tog(this.value)]('x');
            }).on('mousemove', '.x', function( e ){
                $(this)[tog(this.offsetWidth-18 < e.clientX-this.getBoundingClientRect().left)]('onX');
            }).on('touchstart click', '.onX', function( ev ){
                ev.preventDefault();
                $(this).removeClass('x onX').val('').change();
                $('#example').DataTable().destroy();
                $('#example').DataTable().draw();
                $('#example_filter').find('input').addClass('clearable');
            });
               } );
        $('#lnk-create_project').click(function(){


        var projectName = $('#projectName').val();
        document.getElementById('button-id').innerHTML =
                            '<br>' +
                            '<tr><td><a class="btn btn btn-secondary btn-md" id="lnk-create_project"  role="button" data-toggle="tooltip" title="Click on this button to create a New Project"><i class="fa fa-plus-circle" aria-hidden="true"></i>' +
                            'Create Project</a></td></tr>'
                            document.getElementById("lnk-create_project").setAttribute("href","/createProject?p_name=" + projectName);
       });
                    $(function () {
                        $('[data-toggle="popover"]').popover()
                    })
$(document).ready(function(){
$('[data-toggle="tooltip"]').tooltip();
            });
</script>

{% endblock %}